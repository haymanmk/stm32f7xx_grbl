# stm32f7xx_grbl

## Already Known Issues
### Output an unwanted spike during setting OC mode
When setting the output compare mode for each output pin, e.g. toggle, active, inactive, we observed unwanted spikes occasionally occurring after setting the OC mode to toggle. In this case, the open-drain is selected as the output configuration to create the sink logic required by the stepper driver. The polarity is configured as Active HIGH which means the output turns into HIGH state when the OCx is active. For the sink logic, a pull up resistor is necessary to avoid the floating state of the output. So it is obviously to know that the output will stay in HIGH when the OCx is inactive if the OC channel has been reset or restart. The OC setting process has this reset procedure in the first place, and then it is followed by setting the OC mode to the target mode and enable it again, which in turn forces the OCx to the state, LOW in our case, before the OC channel being disabled. That why the spike comes from. In order to address this issue, the **polarity** shall be set to Active LOW, by doing so, the OCx state before resetting the OC channel will be exactly the same with that after disabling the OC channel, both of them are HIGH (due to pull high) even during the transition, and then the unwanted spikes are disappeared.
